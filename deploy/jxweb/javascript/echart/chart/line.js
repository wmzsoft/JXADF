define("echarts/chart/line",["require","./base","zrender/shape/Polyline","../util/shape/Icon","../util/shape/HalfSmoothPolygon","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(t){function e(t,e,i,a,n){o.call(this,t,e,i,a,n),this.refresh(a)}function i(t,e,i){var o=e.x,a=e.y,s=e.width,r=e.height,l=r/2;e.symbol.match("empty")&&(t.fillStyle="#fff"),e.brushType="both";var h=e.symbol.replace("empty","").toLowerCase();h.match("star")?(l=h.replace("star","")-0||5,a-=1,h="star"):("rectangle"===h||"arrow"===h)&&(o+=(s-r)/2,s=r);var m="";if(h.match("image")&&(m=h.replace(new RegExp("^image:\\/\\/"),""),h="image",o+=Math.round((s-r)/2)-1,s=r+=2),h=n.prototype.iconLibrary[h]){var p=e.x,u=e.y;t.moveTo(p,u+l),t.lineTo(p+5,u+l),t.moveTo(p+e.width-5,u+l),t.lineTo(p+e.width,u+l);var d=this;h(t,{x:o+4,y:a+4,width:s-8,height:r-8,n:l,image:m},function(){d.modSelf(),i()})}else t.moveTo(o,a+l),t.lineTo(o+s,a+l)}var o=t("./base"),a=t("zrender/shape/Polyline"),n=t("../util/shape/Icon"),s=t("../util/shape/HalfSmoothPolygon");t("../component/axis"),t("../component/grid"),t("../component/dataZoom");var r=t("../config");r.line={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,dataFilter:"nearest",itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid",shadowColor:"rgba(0,0,0,0)",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0}},emphasis:{label:{show:!1}}},symbolSize:2,showAllSymbol:!1};var l=t("../util/ecData"),h=t("zrender/tool/util"),m=t("zrender/tool/color");return e.prototype={type:r.CHART_TYPE_LINE,_buildShape:function(){this.finalPLMap={},this._buildPosition()},_buildHorizontal:function(t,e,i,o){for(var a,n,s,r,l,h,m,p,u,d=this.series,y=i[0][0],g=d[y],f=this.component.xAxis.getAxis(g.xAxisIndex||0),c={},x=0,v=e;v>x&&null!=f.getNameByIndex(x);x++){n=f.getCoordByIndex(x);for(var L=0,I=i.length;I>L;L++){a=this.component.yAxis.getAxis(d[i[L][0]].yAxisIndex||0),l=r=m=h=a.getCoord(0);for(var b=0,S=i[L].length;S>b;b++)y=i[L][b],g=d[y],p=g.data[x],u=this.getDataFromOption(p,"-"),c[y]=c[y]||[],o[y]=o[y]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==u?(u>=0?(r-=b>0?a.getCoordSize(u):l-a.getCoord(u),s=r):0>u&&(h+=b>0?a.getCoordSize(u):a.getCoord(u)-m,s=h),c[y].push([n,s,x,f.getNameByIndex(x),n,l]),o[y].min>u&&(o[y].min=u,o[y].minY=s,o[y].minX=n),o[y].max<u&&(o[y].max=u,o[y].maxY=s,o[y].maxX=n),o[y].sum+=u,o[y].counter++):c[y].length>0&&(this.finalPLMap[y]=this.finalPLMap[y]||[],this.finalPLMap[y].push(c[y]),c[y]=[])}r=this.component.grid.getY();for(var z,L=0,I=i.length;I>L;L++)for(var b=0,S=i[L].length;S>b;b++)y=i[L][b],g=d[y],p=g.data[x],u=this.getDataFromOption(p,"-"),"-"==u&&this.deepQuery([p,g,this.option],"calculable")&&(z=this.deepQuery([p,g],"symbolSize"),r+=2*z+5,s=r,this.shapeList.push(this._getCalculableItem(y,x,f.getNameByIndex(x),n,s,"horizontal")))}for(var M in c)c[M].length>0&&(this.finalPLMap[M]=this.finalPLMap[M]||[],this.finalPLMap[M].push(c[M]),c[M]=[]);this._calculMarkMapXY(o,i,"y"),this._buildBorkenLine(t,this.finalPLMap,f,"horizontal")},_buildVertical:function(t,e,i,o){for(var a,n,s,r,l,h,m,p,u,d=this.series,y=i[0][0],g=d[y],f=this.component.yAxis.getAxis(g.yAxisIndex||0),c={},x=0,v=e;v>x&&null!=f.getNameByIndex(x);x++){s=f.getCoordByIndex(x);for(var L=0,I=i.length;I>L;L++){a=this.component.xAxis.getAxis(d[i[L][0]].xAxisIndex||0),l=r=m=h=a.getCoord(0);for(var b=0,S=i[L].length;S>b;b++)y=i[L][b],g=d[y],p=g.data[x],u=this.getDataFromOption(p,"-"),c[y]=c[y]||[],o[y]=o[y]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==u?(u>=0?(r+=b>0?a.getCoordSize(u):a.getCoord(u)-l,n=r):0>u&&(h-=b>0?a.getCoordSize(u):m-a.getCoord(u),n=h),c[y].push([n,s,x,f.getNameByIndex(x),l,s]),o[y].min>u&&(o[y].min=u,o[y].minX=n,o[y].minY=s),o[y].max<u&&(o[y].max=u,o[y].maxX=n,o[y].maxY=s),o[y].sum+=u,o[y].counter++):c[y].length>0&&(this.finalPLMap[y]=this.finalPLMap[y]||[],this.finalPLMap[y].push(c[y]),c[y]=[])}r=this.component.grid.getXend();for(var z,L=0,I=i.length;I>L;L++)for(var b=0,S=i[L].length;S>b;b++)y=i[L][b],g=d[y],p=g.data[x],u=this.getDataFromOption(p,"-"),"-"==u&&this.deepQuery([p,g,this.option],"calculable")&&(z=this.deepQuery([p,g],"symbolSize"),r-=2*z+5,n=r,this.shapeList.push(this._getCalculableItem(y,x,f.getNameByIndex(x),n,s,"vertical")))}for(var M in c)c[M].length>0&&(this.finalPLMap[M]=this.finalPLMap[M]||[],this.finalPLMap[M].push(c[M]),c[M]=[]);this._calculMarkMapXY(o,i,"x"),this._buildBorkenLine(t,this.finalPLMap,f,"vertical")},_buildOther:function(t,e,i,o){for(var a,n=this.series,s={},r=0,l=i.length;l>r;r++)for(var h=0,m=i[r].length;m>h;h++){var p=i[r][h],u=n[p];a=this.component.xAxis.getAxis(u.xAxisIndex||0);var d=this.component.yAxis.getAxis(u.yAxisIndex||0),y=d.getCoord(0);s[p]=s[p]||[],o[p]=o[p]||{min0:Number.POSITIVE_INFINITY,min1:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum0:0,sum1:0,counter0:0,counter1:0,average0:0,average1:0};for(var g=0,f=u.data.length;f>g;g++){var c=u.data[g],x=this.getDataFromOption(c,"-");if(x instanceof Array){var v=a.getCoord(x[0]),L=d.getCoord(x[1]);s[p].push([v,L,g,x[0],v,y]),o[p].min0>x[0]&&(o[p].min0=x[0],o[p].minY0=L,o[p].minX0=v),o[p].max0<x[0]&&(o[p].max0=x[0],o[p].maxY0=L,o[p].maxX0=v),o[p].sum0+=x[0],o[p].counter0++,o[p].min1>x[1]&&(o[p].min1=x[1],o[p].minY1=L,o[p].minX1=v),o[p].max1<x[1]&&(o[p].max1=x[1],o[p].maxY1=L,o[p].maxX1=v),o[p].sum1+=x[1],o[p].counter1++}}}for(var I in s)s[I].length>0&&(this.finalPLMap[I]=this.finalPLMap[I]||[],this.finalPLMap[I].push(s[I]),s[I]=[]);this._calculMarkMapXY(o,i,"xy"),this._buildBorkenLine(t,this.finalPLMap,a,"other")},_buildBorkenLine:function(t,e,i,o){for(var n,r="other"==o?"horizontal":o,p=this.series,u=t.length-1;u>=0;u--){var d=t[u],y=p[d],g=e[d];if(y.type===this.type&&null!=g)for(var f=this._getBbox(d,r),c=this._sIndex2ColorMap[d],x=this.query(y,"itemStyle.normal.lineStyle.width"),v=this.query(y,"itemStyle.normal.lineStyle.type"),L=this.query(y,"itemStyle.normal.lineStyle.color"),I=this.getItemStyleColor(this.query(y,"itemStyle.normal.color"),d,-1),b=null!=this.query(y,"itemStyle.normal.areaStyle"),S=this.query(y,"itemStyle.normal.areaStyle.color"),z=0,M=g.length;M>z;z++){var _=g[z],A="other"!=o&&this._isLarge(r,_);if(A)_=this._getLargePointList(r,_,y.dataFilter);else for(var C=0,P=_.length;P>C;C++)n=y.data[_[C][2]],(this.deepQuery([n,y,this.option],"calculable")||this.deepQuery([n,y],"showAllSymbol")||"categoryAxis"===i.type&&i.isMainAxis(_[C][2])&&"none"!=this.deepQuery([n,y],"symbol"))&&this.shapeList.push(this._getSymbol(d,_[C][2],_[C][3],_[C][0],_[C][1],r));var Y=new a({zlevel:y.zlevel,z:y.z,style:{miterLimit:x,pointList:_,strokeColor:L||I||c,lineWidth:x,lineType:v,smooth:this._getSmooth(y.smooth),smoothConstraint:f,shadowColor:this.query(y,"itemStyle.normal.lineStyle.shadowColor"),shadowBlur:this.query(y,"itemStyle.normal.lineStyle.shadowBlur"),shadowOffsetX:this.query(y,"itemStyle.normal.lineStyle.shadowOffsetX"),shadowOffsetY:this.query(y,"itemStyle.normal.lineStyle.shadowOffsetY")},hoverable:!1,_main:!0,_seriesIndex:d,_orient:r});if(l.pack(Y,p[d],d,0,z,p[d].name),this.shapeList.push(Y),b){var N=new s({zlevel:y.zlevel,z:y.z,style:{miterLimit:x,pointList:h.clone(_).concat([[_[_.length-1][4],_[_.length-1][5]],[_[0][4],_[0][5]]]),brushType:"fill",smooth:this._getSmooth(y.smooth),smoothConstraint:f,color:S?S:m.alpha(c,.5)},highlightStyle:{brushType:"fill"},hoverable:!1,_main:!0,_seriesIndex:d,_orient:r});l.pack(N,p[d],d,0,z,p[d].name),this.shapeList.push(N)}}}},_getBbox:function(t,e){var i=this.component.grid.getBbox(),o=this.xMarkMap[t];return null!=o.minX0?[[Math.min(o.minX0,o.maxX0,o.minX1,o.maxX1),Math.min(o.minY0,o.maxY0,o.minY1,o.maxY1)],[Math.max(o.minX0,o.maxX0,o.minX1,o.maxX1),Math.max(o.minY0,o.maxY0,o.minY1,o.maxY1)]]:("horizontal"===e?(i[0][1]=Math.min(o.minY,o.maxY),i[1][1]=Math.max(o.minY,o.maxY)):(i[0][0]=Math.min(o.minX,o.maxX),i[1][0]=Math.max(o.minX,o.maxX)),i)},_isLarge:function(t,e){return e.length<2?!1:"horizontal"===t?Math.abs(e[0][0]-e[1][0])<.5:Math.abs(e[0][1]-e[1][1])<.5},_getLargePointList:function(t,e,i){var o;o="horizontal"===t?this.component.grid.getWidth():this.component.grid.getHeight();var a=e.length,n=[];if("function"!=typeof i)switch(i){case"min":i=function(t){return Math.max.apply(null,t)};break;case"max":i=function(t){return Math.min.apply(null,t)};break;case"average":i=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i];return e/t.length};break;default:i=function(t){return t[0]}}for(var s=[],r=0;o>r;r++){var l=Math.floor(a/o*r),h=Math.min(Math.floor(a/o*(r+1)),a);if(!(l>=h)){for(var m=l;h>m;m++)s[m-l]="horizontal"===t?e[m][1]:e[m][0];s.length=h-l;for(var p=i(s),u=-1,d=1/0,m=l;h>m;m++){var y="horizontal"===t?e[m][1]:e[m][0],g=Math.abs(y-p);d>g&&(u=m,d=g)}var f=e[u].slice();"horizontal"===t?f[1]=p:f[0]=p,n.push(f)}}return n},_getSmooth:function(t){return t?.3:0},_getCalculableItem:function(t,e,i,o,a,n){var s=this.series,l=s[t].calculableHolderColor||this.ecTheme.calculableHolderColor||r.calculableHolderColor,h=this._getSymbol(t,e,i,o,a,n);return h.style.color=l,h.style.strokeColor=l,h.rotation=[0,0],h.hoverable=!1,h.draggable=!1,h.style.text=void 0,h},_getSymbol:function(t,e,i,o,a,n){var s=this.series,r=s[t],l=r.data[e],h=this.getSymbolShape(r,t,l,e,i,o,a,this._sIndex2ShapeMap[t],this._sIndex2ColorMap[t],"#fff","vertical"===n?"horizontal":"vertical");return h.zlevel=r.zlevel,h.z=r.z+1,this.deepQuery([l,r,this.option],"calculable")&&(this.setCalculable(h),h.draggable=!0),h},getMarkCoord:function(t,e){var i=this.series[t],o=this.xMarkMap[t],a=this.component.xAxis.getAxis(i.xAxisIndex),n=this.component.yAxis.getAxis(i.yAxisIndex);if(e.type&&("max"===e.type||"min"===e.type||"average"===e.type)){var s=null!=e.valueIndex?e.valueIndex:null!=o.maxX0?"1":"";return[o[e.type+"X"+s],o[e.type+"Y"+s],o[e.type+"Line"+s],o[e.type+s]]}return["string"!=typeof e.xAxis&&a.getCoordByIndex?a.getCoordByIndex(e.xAxis||0):a.getCoord(e.xAxis||0),"string"!=typeof e.yAxis&&n.getCoordByIndex?n.getCoordByIndex(e.yAxis||0):n.getCoord(e.yAxis||0)]},refresh:function(t){t&&(this.option=t,this.series=t.series),this.backupShapeList(),this._buildShape()},ontooltipHover:function(t,e){for(var i,o,a=t.seriesIndex,n=t.dataIndex,s=a.length;s--;)if(i=this.finalPLMap[a[s]])for(var r=0,l=i.length;l>r;r++){o=i[r];for(var h=0,m=o.length;m>h;h++)n===o[h][2]&&e.push(this._getSymbol(a[s],o[h][2],o[h][3],o[h][0],o[h][1],"horizontal"))}},addDataAnimation:function(t,e){function i(){g--,0===g&&e&&e()}function o(t){t.style.controlPointList=null}for(var a=this.series,n={},s=0,r=t.length;r>s;s++)n[t[s][0]]=t[s];for(var l,h,m,p,u,d,y,g=0,s=this.shapeList.length-1;s>=0;s--)if(u=this.shapeList[s]._seriesIndex,n[u]&&!n[u][3]){if(this.shapeList[s]._main&&this.shapeList[s].style.pointList.length>1){if(d=this.shapeList[s].style.pointList,h=Math.abs(d[0][0]-d[1][0]),p=Math.abs(d[0][1]-d[1][1]),y="horizontal"===this.shapeList[s]._orient,n[u][2]){if("half-smooth-polygon"===this.shapeList[s].type){var f=d.length;this.shapeList[s].style.pointList[f-3]=d[f-2],this.shapeList[s].style.pointList[f-3][y?0:1]=d[f-4][y?0:1],this.shapeList[s].style.pointList[f-2]=d[f-1]}this.shapeList[s].style.pointList.pop(),y?(l=h,m=0):(l=0,m=-p)}else{if(this.shapeList[s].style.pointList.shift(),"half-smooth-polygon"===this.shapeList[s].type){var c=this.shapeList[s].style.pointList.pop();y?c[0]=d[0][0]:c[1]=d[0][1],this.shapeList[s].style.pointList.push(c)}y?(l=-h,m=0):(l=0,m=p)}this.shapeList[s].style.controlPointList=null,this.zr.modShape(this.shapeList[s])}else{if(n[u][2]&&this.shapeList[s]._dataIndex===a[u].data.length-1){this.zr.delShape(this.shapeList[s].id);continue}if(!n[u][2]&&0===this.shapeList[s]._dataIndex){this.zr.delShape(this.shapeList[s].id);continue}}this.shapeList[s].position=[0,0],g++,this.zr.animate(this.shapeList[s].id,"").when(this.query(this.option,"animationDurationUpdate"),{position:[l,m]}).during(o).done(i).start()}g||e&&e()}},n.prototype.iconLibrary.legendLineIcon=i,h.inherits(e,o),t("../chart").define("line",e),e}),define("echarts/util/shape/HalfSmoothPolygon",["require","zrender/shape/Base","zrender/shape/util/smoothBezier","zrender/tool/util","zrender/shape/Polygon"],function(t){function e(t){i.call(this,t)}var i=t("zrender/shape/Base"),o=t("zrender/shape/util/smoothBezier"),a=t("zrender/tool/util");return e.prototype={type:"half-smooth-polygon",buildPath:function(e,i){var a=i.pointList;if(!(a.length<2))if(i.smooth){var n=o(a.slice(0,-2),i.smooth,!1,i.smoothConstraint);e.moveTo(a[0][0],a[0][1]);for(var s,r,l,h=a.length,m=0;h-3>m;m++)s=n[2*m],r=n[2*m+1],l=a[m+1],e.bezierCurveTo(s[0],s[1],r[0],r[1],l[0],l[1]);e.lineTo(a[h-2][0],a[h-2][1]),e.lineTo(a[h-1][0],a[h-1][1]),e.lineTo(a[0][0],a[0][1])}else t("zrender/shape/Polygon").prototype.buildPath(e,i)}},a.inherits(e,i),e});