define("echarts/chart/radar",["require","./base","zrender/shape/Polygon","../component/polar","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../util/accMath","../chart"],function(e){function t(e,t,r,a,s){i.call(this,e,t,r,a,s),this.refresh(a)}var i=e("./base"),r=e("zrender/shape/Polygon");e("../component/polar");var a=e("../config");a.radar={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,polarIndex:0,itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid"}},emphasis:{label:{show:!1}}},symbolSize:2};var s=e("../util/ecData"),o=e("zrender/tool/util"),n=e("zrender/tool/color");return t.prototype={type:a.CHART_TYPE_RADAR,_buildShape:function(){this.selectedMap={},this._symbol=this.option.symbolList,this._queryTarget,this._dropBoxList=[],this._radarDataCounter=0;for(var e,t=this.series,i=this.component.legend,r=0,s=t.length;s>r;r++)t[r].type===a.CHART_TYPE_RADAR&&(this.serie=this.reformOption(t[r]),this.legendHoverLink=t[r].legendHoverLink||this.legendHoverLink,e=this.serie.name||"",this.selectedMap[e]=i?i.isSelected(e):!0,this.selectedMap[e]&&(this._queryTarget=[this.serie,this.option],this.deepQuery(this._queryTarget,"calculable")&&this._addDropBox(r),this._buildSingleRadar(r),this.buildMark(r)));this.addShapeList()},_buildSingleRadar:function(e){for(var t,i,r,a,s=this.component.legend,o=this.serie.data,n=this.deepQuery(this._queryTarget,"calculable"),h=0;h<o.length;h++)r=o[h].name||"",this.selectedMap[r]=s?s.isSelected(r):!0,this.selectedMap[r]&&(s?(i=s.getColor(r),t=s.getItemShape(r),t&&(t.style.brushType=this.deepQuery([o[h],this.serie],"itemStyle.normal.areaStyle")?"both":"stroke",s.setItemShape(r,t))):i=this.zr.getColor(h),a=this._getPointList(this.serie.polarIndex,o[h]),this._addSymbol(a,i,h,e,this.serie.polarIndex),this._addDataShape(a,i,o[h],e,h,n),this._radarDataCounter++)},_getPointList:function(e,t){for(var i,r,a=[],s=this.component.polar,o=0,n=t.value.length;n>o;o++)r=this.getDataFromOption(t.value[o]),i="-"!=r?s.getVector(e,o,r):!1,i&&a.push(i);return a},_addSymbol:function(e,t,i,r,a){for(var o,n=this.series,h=this.component.polar,l=0,p=e.length;p>l;l++)o=this.getSymbolShape(this.deepMerge([n[r].data[i],n[r]]),r,n[r].data[i].value[l],l,h.getIndicatorText(a,l),e[l][0],e[l][1],this._symbol[this._radarDataCounter%this._symbol.length],t,"#fff","vertical"),o.zlevel=this.getZlevelBase(),o.z=this.getZBase()+1,s.set(o,"data",n[r].data[i]),s.set(o,"value",n[r].data[i].value),s.set(o,"dataIndex",i),s.set(o,"special",l),this.shapeList.push(o)},_addDataShape:function(e,t,i,a,o,h){var l=this.series,p=[i,this.serie],d=this.getItemStyleColor(this.deepQuery(p,"itemStyle.normal.color"),a,o,i),c=this.deepQuery(p,"itemStyle.normal.lineStyle.width"),u=this.deepQuery(p,"itemStyle.normal.lineStyle.type"),g=this.deepQuery(p,"itemStyle.normal.areaStyle.color"),y=this.deepQuery(p,"itemStyle.normal.areaStyle"),f={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:e,brushType:y?"both":"stroke",color:g||d||("string"==typeof t?n.alpha(t,.5):t),strokeColor:d||t,lineWidth:c,lineType:u},highlightStyle:{brushType:this.deepQuery(p,"itemStyle.emphasis.areaStyle")||y?"both":"stroke",color:this.deepQuery(p,"itemStyle.emphasis.areaStyle.color")||g||d||("string"==typeof t?n.alpha(t,.5):t),strokeColor:this.getItemStyleColor(this.deepQuery(p,"itemStyle.emphasis.color"),a,o,i)||d||t,lineWidth:this.deepQuery(p,"itemStyle.emphasis.lineStyle.width")||c,lineType:this.deepQuery(p,"itemStyle.emphasis.lineStyle.type")||u}};s.pack(f,l[a],a,i,o,i.name,this.component.polar.getIndicator(l[a].polarIndex)),h&&(f.draggable=!0,this.setCalculable(f)),f=new r(f),this.shapeList.push(f)},_addDropBox:function(e){var t=this.series,i=this.deepQuery(this._queryTarget,"polarIndex");if(!this._dropBoxList[i]){var r=this.component.polar.getDropBox(i);r.zlevel=this.getZlevelBase(),r.z=this.getZBase(),this.setCalculable(r),s.pack(r,t,e,void 0,-1),this.shapeList.push(r),this._dropBoxList[i]=!0}},ondragend:function(e,t){var i=this.series;if(this.isDragend&&e.target){var r=e.target,a=s.get(r,"seriesIndex"),o=s.get(r,"dataIndex");this.component.legend&&this.component.legend.del(i[a].data[o].name),i[a].data.splice(o,1),t.dragOut=!0,t.needRefresh=!0,this.isDragend=!1}},ondrop:function(t,i){var r=this.series;if(this.isDrop&&t.target){var a,o,n=t.target,h=t.dragged,l=s.get(n,"seriesIndex"),p=s.get(n,"dataIndex"),d=this.component.legend;if(-1===p)a={value:s.get(h,"value"),name:s.get(h,"name")},r[l].data.push(a),d&&d.add(a.name,h.style.color||h.style.strokeColor);else{var c=e("../util/accMath");a=r[l].data[p],d&&d.del(a.name),a.name+=this.option.nameConnector+s.get(h,"name"),o=s.get(h,"value");for(var u=0;u<o.length;u++)a.value[u]=c.accAdd(a.value[u],o[u]);d&&d.add(a.name,h.style.color||h.style.strokeColor)}i.dragIn=i.dragIn||!0,this.isDrop=!1}},refresh:function(e){e&&(this.option=e,this.series=e.series),this.backupShapeList(),this._buildShape()}},o.inherits(t,i),e("../chart").define("radar",t),t}),define("echarts/component/polar",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Polygon","zrender/shape/Circle","zrender/shape/Ring","../config","zrender/tool/util","../util/coordinates","../util/accMath","../util/smartSteps","../component"],function(e){function t(e,t,r,a,s){i.call(this,e,t,r,a,s),this.refresh(a)}var i=e("./base"),r=e("zrender/shape/Text"),a=e("zrender/shape/Line"),s=e("zrender/shape/Polygon"),o=e("zrender/shape/Circle"),n=e("zrender/shape/Ring"),h=e("../config");h.polar={zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,boundaryGap:[0,0],splitNumber:5,name:{show:!0,textStyle:{color:"#333"}},axisLine:{show:!0,lineStyle:{color:"#ccc",width:1,type:"solid"}},axisLabel:{show:!1,textStyle:{color:"#333"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},splitLine:{show:!0,lineStyle:{width:1,color:"#ccc"}},type:"polygon"};var l=e("zrender/tool/util"),p=e("../util/coordinates");return t.prototype={type:h.COMPONENT_TYPE_POLAR,_buildShape:function(){for(var e=0;e<this.polar.length;e++)this._index=e,this.reformOption(this.polar[e]),this._queryTarget=[this.polar[e],this.option],this._createVector(e),this._buildSpiderWeb(e),this._buildText(e),this._adjustIndicatorValue(e),this._addAxisLabel(e);for(var e=0;e<this.shapeList.length;e++)this.zr.addShape(this.shapeList[e])},_createVector:function(e){for(var t,i=this.polar[e],r=this.deepQuery(this._queryTarget,"indicator"),a=r.length,s=i.startAngle,o=2*Math.PI/a,n=this._getRadius(),h=i.__ecIndicator=[],l=0;a>l;l++)t=p.polar2cartesian(n,s*Math.PI/180+o*l),h.push({vector:[t[1],-t[0]]})},_getRadius:function(){var e=this.polar[this._index];return this.parsePercent(e.radius,Math.min(this.zr.getWidth(),this.zr.getHeight())/2)},_buildSpiderWeb:function(e){var t=this.polar[e],i=t.__ecIndicator,r=t.splitArea,a=t.splitLine,s=this.getCenter(e),o=t.splitNumber,n=a.lineStyle.color,h=a.lineStyle.width,l=a.show,p=this.deepQuery(this._queryTarget,"axisLine");this._addArea(i,o,s,r,n,h,l),p.show&&this._addLine(i,s,p)},_addAxisLabel:function(t){for(var i,a,s,o,a,n,h,p,d,c,u=e("../util/accMath"),g=this.polar[t],y=this.deepQuery(this._queryTarget,"indicator"),f=g.__ecIndicator,m=this.deepQuery(this._queryTarget,"splitNumber"),v=this.getCenter(t),_=0;_<y.length;_++)if(i=this.deepQuery([y[_],g,this.option],"axisLabel"),i.show){var b=this.deepQuery([i,g,this.option],"textStyle"),S=this.deepQuery([i,g],"formatter");if(s={},s.textFont=this.getFont(b),s.color=b.color,s=l.merge(s,i),s.lineWidth=s.width,a=f[_].vector,n=f[_].value,p=_/y.length*2*Math.PI,d=i.offset||10,c=i.interval||0,!n)return;for(var x=1;m>=x;x+=c+1)o=l.merge({},s),h=u.accAdd(n.min,u.accMul(n.step,x)),h="function"==typeof S?S(h):"string"==typeof S?S.replace("{a}","{a0}").replace("{a0}",h):this.numAddCommas(h),o.text=h,o.x=x*a[0]/m+Math.cos(p)*d+v[0],o.y=x*a[1]/m+Math.sin(p)*d+v[1],this.shapeList.push(new r({zlevel:this.getZlevelBase(),z:this.getZBase(),style:o,draggable:!1,hoverable:!1}))}},_buildText:function(e){for(var t,i,a,s,o,n,h,l=this.polar[e],p=l.__ecIndicator,d=this.deepQuery(this._queryTarget,"indicator"),c=this.getCenter(e),u=0,g=0,y=0;y<d.length;y++)s=this.deepQuery([d[y],l,this.option],"name"),s.show&&(h=this.deepQuery([s,l,this.option],"textStyle"),i={},i.textFont=this.getFont(h),i.color=h.color,i.text="function"==typeof s.formatter?s.formatter.call(this.myChart,d[y].text,y):"string"==typeof s.formatter?s.formatter.replace("{value}",d[y].text):d[y].text,p[y].text=i.text,t=p[y].vector,a=Math.round(t[0])>0?"left":Math.round(t[0])<0?"right":"center",null==s.margin?t=this._mapVector(t,c,1.1):(n=s.margin,u=t[0]>0?n:-n,g=t[1]>0?n:-n,u=0===t[0]?0:u,g=0===t[1]?0:g,t=this._mapVector(t,c,1)),i.textAlign=a,i.x=t[0]+u,i.y=t[1]+g,o=s.rotate?[s.rotate/180*Math.PI,t[0],t[1]]:[0,0,0],this.shapeList.push(new r({zlevel:this.getZlevelBase(),z:this.getZBase(),style:i,draggable:!1,hoverable:!1,rotation:o})))},getIndicatorText:function(e,t){return this.polar[e]&&this.polar[e].__ecIndicator[t]&&this.polar[e].__ecIndicator[t].text},getDropBox:function(e){var t,i,e=e||0,r=this.polar[e],a=this.getCenter(e),s=r.__ecIndicator,o=s.length,n=[],h=r.type;if("polygon"==h){for(var l=0;o>l;l++)t=s[l].vector,n.push(this._mapVector(t,a,1.2));i=this._getShape(n,"fill","rgba(0,0,0,0)","",1)}else"circle"==h&&(i=this._getCircle("",1,1.2,a,"fill","rgba(0,0,0,0)"));return i},_addArea:function(e,t,i,r,a,s,o){for(var n,h,l,p,d=this.deepQuery(this._queryTarget,"type"),c=0;t>c;c++)h=(t-c)/t,o&&("polygon"==d?(p=this._getPointList(e,h,i),n=this._getShape(p,"stroke","",a,s)):"circle"==d&&(n=this._getCircle(a,s,h,i,"stroke")),this.shapeList.push(n)),r.show&&(l=(t-c-1)/t,this._addSplitArea(e,r,h,l,i,c))},_getCircle:function(e,t,i,r,a,s){var n=this._getRadius();return new o({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:r[0],y:r[1],r:n*i,brushType:a,strokeColor:e,lineWidth:t,color:s},hoverable:!1,draggable:!1})},_getRing:function(e,t,i,r){var a=this._getRadius();return new n({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:r[0],y:r[1],r:t*a,r0:i*a,color:e,brushType:"fill"},hoverable:!1,draggable:!1})},_getPointList:function(e,t,i){for(var r,a=[],s=e.length,o=0;s>o;o++)r=e[o].vector,a.push(this._mapVector(r,i,t));return a},_getShape:function(e,t,i,r,a){return new s({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:e,brushType:t,color:i,strokeColor:r,lineWidth:a},hoverable:!1,draggable:!1})},_addSplitArea:function(e,t,i,r,a,s){var o,n,h,l,p,d=e.length,c=t.areaStyle.color,u=[],d=e.length,g=this.deepQuery(this._queryTarget,"type");if("string"==typeof c&&(c=[c]),n=c.length,o=c[s%n],"polygon"==g)for(var y=0;d>y;y++)u=[],h=e[y].vector,l=e[(y+1)%d].vector,u.push(this._mapVector(h,a,i)),u.push(this._mapVector(h,a,r)),u.push(this._mapVector(l,a,r)),u.push(this._mapVector(l,a,i)),p=this._getShape(u,"fill",o,"",1),this.shapeList.push(p);else"circle"==g&&(p=this._getRing(o,i,r,a),this.shapeList.push(p))},_mapVector:function(e,t,i){return[e[0]*i+t[0],e[1]*i+t[1]]},getCenter:function(e){var e=e||0;return this.parseCenter(this.zr,this.polar[e].center)},_addLine:function(e,t,i){for(var r,a,s=e.length,o=i.lineStyle,n=o.color,h=o.width,l=o.type,p=0;s>p;p++)a=e[p].vector,r=this._getLine(t[0],t[1],a[0]+t[0],a[1]+t[1],n,h,l),this.shapeList.push(r)},_getLine:function(e,t,i,r,s,o,n){return new a({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{xStart:e,yStart:t,xEnd:i,yEnd:r,strokeColor:s,lineWidth:o,lineType:n},hoverable:!1})},_adjustIndicatorValue:function(t){for(var i,r,a,s=this.polar[t],o=this.deepQuery(this._queryTarget,"indicator"),n=o.length,h=s.__ecIndicator,l=this._getSeriesData(t),p=s.boundaryGap,d=s.splitNumber,c=s.scale,u=e("../util/smartSteps"),g=0;n>g;g++){if("number"==typeof o[g].max)i=o[g].max,r=o[g].min||0,a={max:i,min:r};else{var y=this._findValue(l,g,d,p);r=y.min,i=y.max}!c&&r>=0&&i>=0&&(r=0),!c&&0>=r&&0>=i&&(i=0);var f=u(r,i,d,a);h[g].value={min:f.min,max:f.max,step:f.step}}},_getSeriesData:function(e){for(var t,i,r,a=[],s=this.component.legend,o=0;o<this.series.length;o++)if(t=this.series[o],t.type==h.CHART_TYPE_RADAR){i=t.data||[];for(var n=0;n<i.length;n++)r=this.deepQuery([i[n],t,this.option],"polarIndex")||0,r!=e||s&&!s.isSelected(i[n].name)||a.push(i[n])}return a},_findValue:function(e,t,i,r){function a(e){(e>s||void 0===s)&&(s=e),(o>e||void 0===o)&&(o=e)}var s,o,n;if(e&&0!==e.length){if(1==e.length&&(o=0),1!=e.length)for(var h=0;h<e.length;h++)a(this.getDataFromOption(e[h].value[t]));else{n=e[0];for(var h=0;h<n.value.length;h++)a(this.getDataFromOption(n.value[h]))}var l=Math.abs(s-o);return o-=Math.abs(l*r[0]),s+=Math.abs(l*r[1]),o===s&&(0===s?s=1:s>0?o=s/i:s/=i),{max:s,min:o}}},getVector:function(e,t,i){e=e||0,t=t||0;var r=this.polar[e].__ecIndicator;if(!(t>=r.length)){var a,s=this.polar[e].__ecIndicator[t],o=this.getCenter(e),n=s.vector,h=s.value.max,l=s.value.min;if("undefined"==typeof i)return o;switch(i){case"min":i=l;break;case"max":i=h;break;case"center":i=(h+l)/2}return a=h!=l?(i-l)/(h-l):.5,this._mapVector(n,o,a)}},isInside:function(e){var t=this.getNearestIndex(e);return t?t.polarIndex:-1},getNearestIndex:function(e){for(var t,i,r,a,s,o,n,h,l,d=0;d<this.polar.length;d++){if(t=this.polar[d],i=this.getCenter(d),e[0]==i[0]&&e[1]==i[1])return{polarIndex:d,valueIndex:0};if(r=this._getRadius(),s=t.startAngle,o=t.indicator,n=o.length,h=2*Math.PI/n,a=p.cartesian2polar(e[0]-i[0],i[1]-e[1]),e[0]-i[0]<0&&(a[1]+=Math.PI),a[1]<0&&(a[1]+=2*Math.PI),l=a[1]-s/180*Math.PI+2*Math.PI,Math.abs(Math.cos(l%(h/2)))*r>a[0])return{polarIndex:d,valueIndex:Math.floor((l+h/2)/h)%n}}},getIndicator:function(e){var e=e||0;return this.polar[e].indicator},refresh:function(e){e&&(this.option=e,this.polar=this.option.polar,this.series=this.option.series),this.clear(),this._buildShape()}},l.inherits(t,i),e("../component").define("polar",t),t}),define("echarts/util/coordinates",["require","zrender/tool/math"],function(e){function t(e,t){return[e*r.sin(t),e*r.cos(t)]}function i(e,t){return[Math.sqrt(e*e+t*t),Math.atan(t/e)]}var r=e("zrender/tool/math");return{polar2cartesian:t,cartesian2polar:i}});