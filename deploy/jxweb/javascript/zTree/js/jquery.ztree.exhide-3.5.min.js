!function(e){e.extend(!0,e.fn.zTree._z,{view:{clearOldFirstNode:function(e,i){for(var d=i.getNextNode();d;){if(d.isFirstNode){d.isFirstNode=!1,t.setNodeLineIcos(e,d);break}if(d.isLastNode)break;d=d.getNextNode()}},clearOldLastNode:function(e,i){for(var d=i.getPreNode();d;){if(d.isLastNode){d.isLastNode=!1,t.setNodeLineIcos(e,d);break}if(d.isFirstNode)break;d=d.getPreNode()}},makeDOMNodeMainBefore:function(e,i,t){e.push("<li ",t.isHidden?"style='display:none;' ":"","id='",t.tId,"' class='",d.className.LEVEL,t.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(e,i){i.isHidden=!1,o.initShowForExCheck(e,i),s(i,e).show()},showNodes:function(e,i,d){if(i&&0!=i.length){var s,n,r={};for(s=0,n=i.length;n>s;s++){var a=i[s];if(!r[a.parentTId]){var N=a.getParentNode();r[a.parentTId]=null===N?o.getRoot(e):a.getParentNode()}t.showNode(e,a,d)}for(var c in r)i=r[c][e.data.key.children],t.setFirstNodeForShow(e,i),t.setLastNodeForShow(e,i)}},hideNode:function(e,i){i.isHidden=!0,i.isFirstNode=!1,i.isLastNode=!1,o.initHideForExCheck(e,i),t.cancelPreSelectedNode(e,i),s(i,e).hide()},hideNodes:function(e,i,d){if(i&&0!=i.length){var s,n,r={};for(s=0,n=i.length;n>s;s++){var a=i[s];if((a.isFirstNode||a.isLastNode)&&!r[a.parentTId]){var N=a.getParentNode();r[a.parentTId]=null===N?o.getRoot(e):a.getParentNode()}t.hideNode(e,a,d)}for(var c in r)i=r[c][e.data.key.children],t.setFirstNodeForHide(e,i),t.setLastNodeForHide(e,i)}},setFirstNode:function(e,i){var d=e.data.key.children,o=i[d].length;o>0&&!i[d][0].isHidden?i[d][0].isFirstNode=!0:o>0&&t.setFirstNodeForHide(e,i[d])},setLastNode:function(e,i){var d=e.data.key.children,o=i[d].length;o>0&&!i[d][0].isHidden?i[d][o-1].isLastNode=!0:o>0&&t.setLastNodeForHide(e,i[d])},setFirstNodeForHide:function(e,i){var d,o,s;for(o=0,s=i.length;s>o&&(d=i[o],!d.isFirstNode);o++){if(!d.isHidden&&!d.isFirstNode){d.isFirstNode=!0,t.setNodeLineIcos(e,d);break}d=null}return d},setFirstNodeForShow:function(e,i){var d,o,s,n,r;for(o=0,s=i.length;s>o;o++){if(d=i[o],!n&&!d.isHidden&&d.isFirstNode){n=d;break}if(n||d.isHidden||d.isFirstNode){if(n&&d.isFirstNode){d.isFirstNode=!1,r=d,t.setNodeLineIcos(e,d);break}}else d.isFirstNode=!0,n=d,t.setNodeLineIcos(e,d)}return{"new":n,old:r}},setLastNodeForHide:function(e,i){var d,o;for(o=i.length-1;o>=0&&(d=i[o],!d.isLastNode);o--){if(!d.isHidden&&!d.isLastNode){d.isLastNode=!0,t.setNodeLineIcos(e,d);break}d=null}return d},setLastNodeForShow:function(e,i){var d,o,s,n;for(o=i.length-1;o>=0;o--){if(d=i[o],!s&&!d.isHidden&&d.isLastNode){s=d;break}if(s||d.isHidden||d.isLastNode){if(s&&d.isLastNode){d.isLastNode=!1,n=d,t.setNodeLineIcos(e,d);break}}else d.isLastNode=!0,s=d,t.setNodeLineIcos(e,d)}return{"new":s,old:n}}},data:{initHideForExCheck:function(e,i){i.isHidden&&e.check&&e.check.enable&&("undefined"==typeof i._nocheck&&(i._nocheck=!!i.nocheck,i.nocheck=!0),i.check_Child_State=-1,t.repairParentChkClassWithSelf&&t.repairParentChkClassWithSelf(e,i))},initShowForExCheck:function(e,i){if(!i.isHidden&&e.check&&e.check.enable){if("undefined"!=typeof i._nocheck&&(i.nocheck=i._nocheck,delete i._nocheck),t.setChkClass){var o=s(i,d.id.CHECK,e);t.setChkClass(e,o,i)}t.repairParentChkClassWithSelf&&t.repairParentChkClassWithSelf(e,i)}}}});var e=e.fn.zTree,i=e._z.tools,d=e.consts,t=e._z.view,o=e._z.data,s=i.$;o.addInitNode(function(e,d,t){"string"==typeof t.isHidden&&(t.isHidden=i.eqs(t.isHidden,"true")),t.isHidden=!!t.isHidden,o.initHideForExCheck(e,t)}),o.addBeforeA(function(){}),o.addZTreeTools(function(e,i){i.showNodes=function(i,d){t.showNodes(e,i,d)},i.showNode=function(i,d){i&&t.showNodes(e,[i],d)},i.hideNodes=function(i,d){t.hideNodes(e,i,d)},i.hideNode=function(i,d){i&&t.hideNodes(e,[i],d)};var d=i.checkNode;d&&(i.checkNode=function(e){(!e||!e.isHidden)&&d.apply(i,arguments)})});var n=o.initNode;o.tmpHideParent=-1,o.initNode=function(e,i,d,s,r,a){if(o.tmpHideParent!==s){o.tmpHideParent=null==s?-1:s;var N=(s?s:o.getRoot(e))[e.data.key.children];o.tmpHideFirstNode=t.setFirstNodeForHide(e,N),o.tmpHideLastNode=t.setLastNodeForHide(e,N),t.setNodeLineIcos(e,o.tmpHideFirstNode),t.setNodeLineIcos(e,o.tmpHideLastNode)}r=o.tmpHideFirstNode===d,a=o.tmpHideLastNode===d,n&&n.apply(o,arguments),a&&t.clearOldLastNode(e,d)};var r=o.makeChkFlag;r&&(o.makeChkFlag=function(e,i){(!i||!i.isHidden)&&r.apply(o,arguments)});var a=o.getTreeCheckedNodes;a&&(o.getTreeCheckedNodes=function(e,i){if(i&&i.length>0){var d=i[0].getParentNode();if(d&&d.isHidden)return[]}return a.apply(o,arguments)});var N=o.getTreeChangeCheckedNodes;N&&(o.getTreeChangeCheckedNodes=function(e,i){if(i&&i.length>0){var d=i[0].getParentNode();if(d&&d.isHidden)return[]}return N.apply(o,arguments)});var c=t.expandCollapseSonNode;c&&(t.expandCollapseSonNode=function(e,i){(!i||!i.isHidden)&&c.apply(t,arguments)});var h=t.setSonNodeCheckBox;h&&(t.setSonNodeCheckBox=function(e,i){(!i||!i.isHidden)&&h.apply(t,arguments)});var f=t.repairParentChkClassWithSelf;f&&(t.repairParentChkClassWithSelf=function(e,i){(!i||!i.isHidden)&&f.apply(t,arguments)})}(jQuery);